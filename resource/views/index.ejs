<div class="container-fluid">
  <div class="row">
    <nav class="col-md-2 d-none d-md-block bg-light sidebar">
      <div class="sidebar-sticky">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a
              class="nav-link <%= url == '/' ? 'active' : '' %>"
              href="/api/admin"
            >
              <span data-feather="shopping-cart"></span>
              انالیز سایت
            </a>
          </li>

          <li class="nav-item">
            <a
              class="nav-link <%= url == '/courses' ? 'active' : '' %>"
              href="/api/admin/oilChanger"
            >
              <span data-feather="file"></span>
              تعویض روغنی
            </a>
          </li>

          <li class="nav-item">
            <a
              class="nav-link <%= url == '/users' ? 'active' : '' %>"
              href="/api/admin/users"
            >
              <span data-feather="users"></span>
              کاربران
            </a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</div>

<div
  class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-2 pb-2 mb-3 border-bottom"
>
  <h1 class="h2">آمار کاربران</h1>
  <div class="btn-toolbar mb-2 mb-md-0">
    <div class="btn-group me-2">
      <button
        type="button"
        style="color: black"
        disabled
        class="btn btn-sm btn-outline-secondary"
      >
        همه کاربران سایت
        <h4><%= userCount.length %></h4>
      </button>
      <button
        type="button"
        style="color: black"
        disabled
        class="btn btn-sm btn-outline-secondary"
      >
        ثبت نامی های یک ماه اخیر
        <h4><%= usersM.length %></h4>
      </button>
      <button
        type="button"
        style="color: black"
        disabled
        class="btn btn-sm btn-outline-secondary"
      >
        تعداد سرویس های امروز
        <h4><%= serviceDay.length %></h4>
      </button>
      <button
        type="button"
        style="color: black"
        disabled
        class="btn btn-sm btn-outline-secondary"
      >
        تعداد سرویس های یک ماه
        <h4><%= serviceMonth.length %></h4>
      </button>
      <button
        type="button"
        style="color: black"
        disabled
        class="btn btn-sm btn-outline-secondary"
      >
        تعداد همه سرویس ها
        <h4><%= serviceCount.length %></h4>
      </button>
    </div>
  </div>
</div>

<canvas class="my-4" id="myChart" width="900" height="380"></canvas>

<!-- Icons -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
<script>
  (() => {
    "use strict";

    // Graphs
    var ctx = document.getElementById("myChart");
    var myChart = new Chart(ctx, {
      type: "line",
      data: {
        labels: ["<%= moment(startDay7).format('jD jMMMM jYYYY') %>", "<%= moment(startDay6).format('jD jMMMM jYYYY') %>", "<%= moment(startDay5).format('jD jMMMM jYYYY') %>", "<%= moment(startDay4).format('jD jMMMM jYYYY') %>", "<%= moment(startDay3).format('jD jMMMM jYYYY') %>", "<%= moment(startDay2).format('jD jMMMM jYYYY') %>", "<%= moment(startDay1).format('jD jMMMM jYYYY') %>"],
        datasets: [
          {
            data: [<%= users7.length %>, <%= users6.length %>, <%= users5.length %>, <%= users4.length %>, <%= users3.length %>, <%= users2.length %>, <%= users1.length %>],
            lineTension: 0,
            backgroundColor: "transparent",
            borderColor: "#007bff",
            borderWidth: 4,
            pointBackgroundColor: "#007bff",
          },
        ],
      },
      options: {
        scales: {
          yAxes: [
            {
              ticks: {
                beginAtZero: false,
              },
            },
          ],
        },
        legend: {
          display: false,
        },
      },
    });
  })();
</script>
